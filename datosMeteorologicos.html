<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>AgroPro - Datos Meteorológicos</title>
</head>

<body>
    <header>
        <div class="barra">
            <div class="logo">
                <a href="index.html"><img src="/Imagenes/logo.png" alt="" href="#"></a>
            </div>
            <div class="titulo-ingresar">
                <h1>Datos Meteorológicos</h1>
            </div>
        </div>
    </header>
    <main>
        <div class="row datosMeteoro">
            <div class="col-4 lluvias">
                <h1>LLuvias</h1>
                <a><button onclick="cargarTablaLluvia()">Obtener info</button></a>
                <img src="./Imagenes/imagen1.png">
                <table class="table tablaLluvia">
                    <thead>
                        <tr>
                            <th scope="col">Dia</th>
                            <th scope="col">Cantidad (mm)</th>
                        </tr>
                    </thead>
                    <tbody id="cuerpoTabla1">
                    </tbody>
                </table>
                <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Ex tempora voluptatibus nemo? Quibusdam
                    libero quidem porro minus, blanditiis veritatis sequi omnis ex quae eligendi velit mollitia nostrum
                    officia enim exercitationem?</p>
            </div>
            <div class="col-4 humedad">
                <h1>Vientos</h1>
                <a><button onclick="cargarTablaVientos()">Obtener info</button></a>
                <img src="./Imagenes/imagen1.png">
                <table class="table tablaViento">
                    <thead>
                        <tr>
                            <th scope="col">Dia</th>
                            <th scope="col">Temperatura minima</th>
                            <th scope="col">Temperatura maxima</th>
                        </tr>
                    </thead>
                    <tbody id="cuerpoTabla2">
                    </tbody>
                </table>
                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Excepturi pariatur assumenda sequi dolorem
                    recusandae rerum voluptatibus ullam obcaecati suscipit, velit hic repellendus eaque provident vero,
                    veritatis incidunt dignissimos aspernatur dolor.</p>
            </div>
            <div class="col-4 vientos">
                <h1>Temperatura</h1>
                <a><button onclick="cargarTablaTemp()">Obtener info</button></a>
                <img src="./Imagenes/imagen1.png">
                <table class="table tablaTemperatura">
                    <thead>
                        <tr>
                            <th scope="col">Dia</th>
                            <th scope="col">Dirección</th>
                            <th scope="col">Velocidad (km)</th>
                        </tr>
                    </thead>
                    <tbody id="cuerpoTabla3">
                    </tbody>
                </table>
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ullam labore obcaecati sit aperiam adipisci
                    itaque veniam tenetur expedita veritatis recusandae harum ab quam ipsum atque soluta, cum impedit
                    ratione neque?</p>
            </div>
        </div>
        <div class="row botonesFinal">
            <button>ATRAS</button>
            <button>CERRAR SESION</button>
        </div>
    </main>
    <footer>
        <div class="derechos">
            <p>Copyright © AgroPro</p>
        </div>
        <div class="contacto">
            <p>Proyecto Final - Grupo 5</p>
        </div>
    </footer>
    <script>
        function cargarTablaTemp() {
            fetch('https://api.weatherbit.io/v2.0/forecast/daily?lat=-26.8528&lon=-65.7083&days=10&lang=es&key=66a5873f866745edb4f9132616310ae5')
                .then(response => response.json())
                .then(data => mostrarTemp(data));
        }

        function mostrarTemp(data) {
            const datosClima = JSON.parse(JSON.stringify(data));
            const cuerpoTabla = document.getElementById('cuerpoTabla3');
            for (let i = 0; i < datosClima.data.length; i++) {                
                
                const fila = document.createElement('tr');

                const td1 = document.createElement('td');
                const textTd1 = document.createTextNode(datosClima.data[i].datetime);
                td1.appendChild(textTd1);
                fila.appendChild(td1);

                const td2 = document.createElement('td');
                const textTd2 = document.createTextNode(datosClima.data[i].min_temp);
                td2.appendChild(textTd2);
                fila.appendChild(td2);

                const td3 = document.createElement('td');
                const textTd3 = document.createTextNode(datosClima.data[i].max_temp);
                td3.appendChild(textTd3);
                fila.appendChild(td3);
                
                cuerpoTabla.appendChild(fila);
            }            
        }

        function cargarTablaLluvia() {
            fetch('https://api.weatherbit.io/v2.0/forecast/daily?lat=-26.8528&lon=-65.7083&days=10&lang=es&key=66a5873f866745edb4f9132616310ae5')
                .then(response => response.json())
                .then(data => mostrarlluvia(data));
        }

        function mostrarlluvia(data) {
            const datosClima = JSON.parse(JSON.stringify(data));
            const cuerpoTabla = document.getElementById('cuerpoTabla1');
            for (let i = 0; i < datosClima.data.length; i++) {                
                
                const fila = document.createElement('tr');

                const td1 = document.createElement('td');
                const textTd1 = document.createTextNode(datosClima.data[i].datetime);
                td1.appendChild(textTd1);
                fila.appendChild(td1);

                const td2 = document.createElement('td');
                const textTd2 = document.createTextNode(datosClima.data[i].precip);
                td2.appendChild(textTd2);
                fila.appendChild(td2);
                
                cuerpoTabla.appendChild(fila);
            }            
        }

        function cargarTablaVientos() {
            fetch('https://api.weatherbit.io/v2.0/forecast/daily?lat=-26.8528&lon=-65.7083&days=10&lang=es&key=66a5873f866745edb4f9132616310ae5')
                .then(response => response.json())
                .then(data => mostrarVientos(data));
        }

        function mostrarVientos(data) {
            const datosClima = JSON.parse(JSON.stringify(data));
            const cuerpoTabla = document.getElementById('cuerpoTabla2');
            for (let i = 0; i < datosClima.data.length; i++) {                
                
                const fila = document.createElement('tr');

                const td1 = document.createElement('td');
                const textTd1 = document.createTextNode(datosClima.data[i].datetime);
                td1.appendChild(textTd1);
                fila.appendChild(td1);

                const td2 = document.createElement('td');
                const textTd2 = document.createTextNode(datosClima.data[i].wind_cdir_full);
                td2.appendChild(textTd2);
                fila.appendChild(td2);
                
                const td3 = document.createElement('td');
                const textTd3 = document.createTextNode(datosClima.data[i].wind_spd);
                td3.appendChild(textTd3);
                fila.appendChild(td3);

                cuerpoTabla.appendChild(fila);
            }            
        }
    </script>
    <script src="app.js"></script>
</body>

</html>